---
layout: post
part: Part One
date: 2022-02-18
tagline: Digital circuits are ubiquitous in today's society. But what if we gave them the categorical treatment?
---

## Introduction

Digital circuit

In the business, reasoning with circuits is generally performed by translating them into some sort of automata (such as a Mealy or a Moore machine) and then *simulating* them for some given inputs.

To do this, we must look o
Circuits are constructed from the basic building blocks of *logic gates*.
We can then compose these together in a variety of ways to 

If these seem familiar then 

## Syntax

To construct circuits formally, we can model them as morphisms (or *terms*) in a *symmetric monoidal category*.
Rather than using the traditional method of writing terms as one-dimensional text strings, we will use the graphical syntax of *string diagrams* \[JS81, Sel10\].
Not only does this make things a lot clearer, it has a practical benefit in that it can eliminate a lot of structural bureaucracy, such as having to deal with associativity all the time.

Constructing circuits is simply a matter of getting a load of gates and bashing them together.
The categorical parallel of this is a *freely generated symmetric monoidal category*.
In this setting, we have a set of *generators*: these are our basic building blocks.

In the context of digital circuits there are some obvious choices of generators.
The logic gates are

The signals (or *values*) in circuits must also be modelled as generators.
Of course, there are the traditional values of *true* (high) and *false* (low).
We will also use two special values: a *disconnected wire* and a *short circuit*. 

{% figure %}
    {% tikz "circuits/components/gates/and" %}
    {% tikz "circuits/components/gates/or" %}
    {% tikz "circuits/components/gates/not" %}
    {% tikz "circuits/components/values/true" %}
    {% tikz "circuits/components/values/false" %}
    {% tikz "strings/monoids/discard-r" %}
    {% tikz "strings/monoids/discard-r-white" %}
{% endfigure %}

All circuits all share some common *structural* generators.
We can *fork* wires, *stub* redundant ones, or *join* them together.
Finally we can extend wires an *identity*, or swap them over with a *symmetry*.

{% figure %}
    {% tikz "strings/monoids/copy-lr" %}
    {% tikz "strings/monoids/discard-l" %}
    {% tikz "strings/monoids/copy-rl" %}
    {% tikz "strings/category/identity" %}
    {% tikz "strings/symmetric/symmetry" %}
{% endfigure %}


On their own these generators aren't very interesting, but we can put them together horizontally (*composition*) or vertically (*tensor*) to create bigger circuits.
We write {% tikz "strings/category/f.caps" %} with capital letters to represent composite morphisms constructed in this way.

{% figure %}
    {% tikz "strings/category/composition.caps" %}
    {% tikz "strings/monoidal/tensor.caps" %}
{% endfigure %}

When drawing boxes with multiple wires, we will often compress them into a single wires like {% tikz "circuits/components/fcirc" %}, but the actual number should be clear from context.

### Delay and feedback

By composing the generators in the previous section together in various ways you can create all sorts of circuits.
But there is one crucial property they all share: these are *combinational circuits*, circuits that act as functions on their inputs, always producing the same outputs given the same inputs.


What makes circuits interesting is the inclusion of *delay* and *feedback*.
These are what are known as *sequential circuits*.

Representing delay is easy: we can add an additional generator:

{% figure %}
    {% tikz "circuits/components/delay" %}
{% endfigure %}

For feedback we need to add another operation to our framework: a *trace operator*.
This connects some of the outputs of a circuit back to its inputs.

{% figure %}
    {% tikz "strings/traced/trace-lhs-rhs" %}
{% endfigure %}

## Semantics

So far circuits have only been constructed *syntactically*: they have no associated computation behaviour.
While this means you can make some very pretty string diagrams, it does mean they are otherwise completely useless.
To add *semantics* to our circuits, first we must interpret the signature in some domain.


## Combinational feedback


## References

* \[GJ16\] 
* \[GJL17\]